<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Favourite things</title>
    <link rel="shortcut icon" type="image/jpg" href="/favicon.ico"/>
    <script
        src="https://code.jquery.com/jquery-3.4.1.js"
        integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
        crossorigin="anonymous"></script>
    <script>
        function SubForm (){
            const data = $("#myForm").serializeArray();
            console.log("SubForm", data);
            $.ajax({
                url:'https://api.apispreadsheets.com/data/10618/',
                type:'post',
                data:data,
                success: function(){
                  alert("Form Data Submitted :)")
                },
                error: function(){
                  alert("There was an error :(")
                }
            });
        }
    </script>
</head>
<body>

    <h1>Hello <span id="username"></span></h1>
    <h3>Sign up</h3>
    <form id="myForm">
        <label for="Name">Name</label>
        <br>
        <input id="name" name="name" type="text" required></input>
        <br>
        <label for="food">Food</label>
        <br>
        <input id="food" name="food" type="text" required></input>
        <br>
        <label for="hobby">Hobby</label>
        <br>
        <input id="hobby" name="hobby" type="text" required></input>
        <br>
        <label for="animal">Animal</label>
        <br>
        <input id="animal" name="animal" type="text" required></input>
        <br>
        <label for="game">Game</label>
        <br>
        <input id="game" name="game" type="text" required></input>
        <br>
        <label for="image">Image</label>
        <br>
        <input id="image" name="image" type="text" required></input>
        <br>
    </form>
    <button onclick="SubForm()">Submit</button>
    <h3>Login</h3>
    <form>
        <select name="select" id="select">
        </select>
    </form>
    <h3>You are awesome</h3>
    <p id="info"></p>
    <img> </img>
        <script>   
            const favourites = [
                {
                    name:""
                },
                {
                    name: 'Samuel',
                    food:'Tacos',
                    hobby:'Programing',
                    animal: 'a Dog',
                    game:"______",
                    image: "/images/samuel.jpg"
                },
                {
                    name: 'Daddio',
                    food:'Rocotto relleno',
                    hobby:'Programing',
                    animal: 'a Snow Dog',
                    game:"______",
                    image: "/images/daddio.jpg"
                },
                {
                    name: 'Mummy',
                    food:'Pizza',
                    hobby:'Playing games',
                    animal: 'a Elephant',
                    game:"______",
                    image: "/images/christine.jpg"
                },
                {
                    name:'Amelia',
                    food:'Butter chicken',
                    hobby:'Reading',
                    animal:'a Dolphin',
                    game:"______",
                    image:"/images/amelia.jpg"
                },
                {
                    name:'Annabelle',
                    food:'Pizza',
                    hobby:'Gymnastics',
                    animal:'a Dog',
                    game:"______",
                    image:"/images/annabelle.jpg"
                },
                ]

            document.getElementById("select").addEventListener("change", changeEvent);
            
            function createSelectField(){
                const select = document.getElementById('select')

                const names = favourites.map(item => `<option value="${item.name}">${item.name}</option>`)
                select.innerHTML = names
            }
            let color = "orange"
            createSelectField()
            function changeEvent(e) {
                let userName = this.value

                const usernameElement = document.getElementById('username')
                usernameElement.innerHTML = userName

                const info = document.getElementById('info')
                info.innerHTML = '';

               
                const selectedPerson = favourites.filter(function (item){
                    return item.name === userName
                })
                let favouriteThings = ''
                    for (keyName in selectedPerson[0]) {
                        value = selectedPerson[0][keyName]
                        if(keyName === "best friend"){
                            favouriteThings += "<li>Your " + keyName + " is " + value + ".</li>"
                        }
                        else if(keyName === "name"){

                        }
                        else if(keyName ==="image"){
                            favouriteThings += '<br><img src="' + value + '" alt="' + selectedPerson[0].name + '" width=300/>'
                        }
                        else{
                            favouriteThings += "<li >Your favourite " + keyName + " is " + value + "</li>"
                        }

                }


                info.innerHTML = '<ul>' + favouriteThings + '</ul>'

                e.preventDefault();
            }
        // document.getElementById('button-save').addEventListener("click", clickFunction);
    </script>
</body>
</html>
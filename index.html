<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Favourite things</title>
    <link rel="shortcut icon" type="image/jpg" href="/favicon.ico"/>
    <script
        src="https://code.jquery.com/jquery-3.4.1.js"
        integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
        crossorigin="anonymous"></script>
    <script>
        // Immediately Invoked Function Expression (IIFE)
        (function(){
            function writeData(favourites){
                let options = ['<option value=""></option>']
                const select = document.getElementById('select')
                for(let i = 0;i<favourites.length;i++){
                    options.push(`<option value="${favourites[i]["name"]}">${favourites[i]["name"]}</option>`)
                }
                select.innerHTML = options


            }

            async function getData(url) {
                return await fetch(url)
                .then(response => response.json())
            }

            getData('https://api.apispreadsheets.com/data/10618/')
            .then(data => writeData(data.data))
            
        })()

        function SubForm (){
            const data = $("#myForm").serializeArray();
            console.log("SubForm", data);
            $.ajax({
                url:'https://api.apispreadsheets.com/data/10618/',
                type:'post',
                data:data,
                success: function(){
                  alert("Form Data Submitted :)")
                },
                error: function(){
                  alert("There was an error :(")
                }
            });
        }
    </script>
</head>
<body>

    <h1>Hello <span id="username"></span></h1>
    <h3>Add yourself to the webpage</h3>
    <form id="myForm">
        <label for="Name">Name</label>
        <br>
        <input id="name" name="name" type="text" required></input>
        <br>
        <label for="food">Food</label>
        <br>
        <input id="food" name="food" type="text" required></input>
        <br>
        <label for="hobby">Hobby</label>
        <br>
        <input id="hobby" name="hobby" type="text" required></input>
        <br>
        <label for="animal">Animal</label>
        <br>
        <input id="animal" name="animal" type="text" required></input>
        <br>
        <label for="game">Game</label>
        <br>
        <input id="game" name="game" type="text" required></input>
        <br>
        <label for="image">Image</label>
        <br>
        <input id="image" name="image" type="text" required></input>
        <br>
    </form>
    <button onclick="SubForm()">Submit</button>
    <h3>Select your name</h3>
    <form>
        <select name="select" id="select"></select>
    </form>
    <h3>You are awesome</h3>
    <p id="info"></p>
    <img> </img>
       
</body>
</html>